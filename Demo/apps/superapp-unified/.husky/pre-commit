#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# ğŸ¯ Builder.io Pre-commit Hook
# Validates Builder.io rules before allowing commits

echo "ğŸ¯ Running Builder.io pre-commit validation..."

# Run Builder.io rules validation
npm run validate:builder

# Check if validation passed
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Builder.io validation failed!"
  echo "ğŸ”§ Fix the issues above before committing."
  echo "ğŸ’¡ Run 'npm run validate:builder:fix' to auto-fix some issues."
  echo "ğŸ“– See .builderrules for detailed guidelines."
  exit 1
fi

echo "âœ… Builder.io validation passed!"

# Run standard linting
echo "ğŸ” Running ESLint..."
npm run lint

if [ $? -ne 0 ]; then
  echo ""
  echo "âš ï¸ ESLint found issues. Consider fixing them."
  echo "ğŸ”§ Run 'npm run lint:fix' to auto-fix some issues."
  # Don't exit here, allow commit with warnings
fi

echo "âœ… Pre-commit validation completed!" 
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸŒŸ Iniciando PurificaciÃ³n Pre-commit..."

# Cambiar al directorio del backend
cd backend

# Ejecutar linting con auto-fix
echo "ğŸ” Ejecutando ESLint con auto-fix..."
npm run lint

# Verificar que no hay errores crÃ­ticos
echo "ğŸ¯ Verificando purificaciÃ³n completa..."
npm run lint:check

if [ $? -eq 0 ]; then
  echo "âœ¨ PURIFICACIÃ“N EXITOSA - Commit permitido âœ¨"
else
  echo "ğŸš« PURIFICACIÃ“N FALLIDA - Commit bloqueado"
  echo "ğŸ’¡ Ejecuta 'npm run lint' para corregir errores automÃ¡ticamente"
  exit 1
fi
